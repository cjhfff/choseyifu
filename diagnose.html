<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å¿«é€Ÿè¯Šæ–­</title>
    <style>
        body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
        .ok { color: #4ec9b0; }
        .error { color: #f48771; }
        .warn { color: #dcdcaa; }
    </style>
</head>
<body>
    <h2>ğŸ” å¿«é€Ÿè¯Šæ–­å·¥å…·</h2>
    <div id="log"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        const log = document.getElementById('log');
        
        function print(msg, type = 'ok') {
            log.innerHTML += `<div class="${type}">${msg}</div>`;
            console.log(msg);
        }
        
        setTimeout(async () => {
            print('=== å¼€å§‹è¯Šæ–­ ===');
            
            // 1. SDK æ£€æŸ¥
            if (window.supabase) {
                print('âœ… Supabase SDK å·²åŠ è½½');
            } else {
                print('âŒ Supabase SDK æœªåŠ è½½', 'error');
                return;
            }
            
            // 2. åˆ›å»ºå®¢æˆ·ç«¯
            let client;
            try {
                client = window.supabase.createClient(
                    'https://zffopygwvczaeixfxzzm.supabase.co',
                    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpmZm9weWd3dmN6YWVpeGZ4enptIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQzNjcxODIsImV4cCI6MjA3OTk0MzE4Mn0.x_qj6ebWq1oXmLTmsjUo57yPNgtHs-BB5fKceoO891s'
                );
                print('âœ… Supabase å®¢æˆ·ç«¯åˆ›å»ºæˆåŠŸ');
            } catch (e) {
                print('âŒ å®¢æˆ·ç«¯åˆ›å»ºå¤±è´¥: ' + e.message, 'error');
                return;
            }
            
            // 3. æµ‹è¯•æ•°æ®åº“è¿æ¥
            try {
                const { data, error } = await client.from('clothes').select('*').limit(1);
                if (error) throw error;
                print('âœ… æ•°æ®åº“è¿æ¥æˆåŠŸï¼Œæ‰¾åˆ° ' + (data?.length || 0) + ' æ¡è®°å½•');
            } catch (e) {
                print('âŒ æ•°æ®åº“è¿æ¥å¤±è´¥: ' + e.message, 'error');
                print('âš ï¸  è¯·ç¡®è®¤å·²åœ¨ Supabase åˆ›å»º clothes è¡¨', 'warn');
            }
            
            // 4. æµ‹è¯• Bucket
            try {
                const { data, error } = await client.storage.getBucket('cloth-images');
                if (error) throw error;
                print('âœ… Storage Bucket "cloth-images" å­˜åœ¨');
            } catch (e) {
                print('âŒ Bucket ä¸å­˜åœ¨: ' + e.message, 'error');
                print('âš ï¸  è¯·åœ¨ Supabase Storage åˆ›å»º cloth-images bucket', 'warn');
            }
            
            print('\n=== è¯Šæ–­å®Œæˆ ===');
            print('\nğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œï¼š');
            print('1. å¦‚æœæ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œè¯·è¿è¡Œ SUPABASE_QUICKSTART.md ä¸­çš„ SQL');
            print('2. å¦‚æœ Bucket ä¸å­˜åœ¨ï¼Œè¯·åœ¨ Supabase Dashboard åˆ›å»º');
            print('3. æ‰€æœ‰æµ‹è¯•é€šè¿‡åï¼Œåˆ·æ–°ä¸»åº”ç”¨å³å¯æ­£å¸¸ä½¿ç”¨');
        }, 1000);
    </script>
</body>
</html>
