<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>穿搭助手 - 我的衣柜</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 应用容器 -->
    <div id="app">
        <!-- 导航栏 -->
        <nav class="navbar">
            <h1 class="app-title">穿搭助手</h1>
            <div class="nav-actions">
                <button id="add-cloth-btn" class="btn-primary">📷 拍照</button>
                <button id="upload-cloth-btn" class="btn-primary">📁 相册</button>
            </div>
        </nav>

        <!-- 主内容区 -->
        <main class="main-content">
            <!-- 页面容器 -->
            <div id="page-container">
                <!-- 首页：衣柜概览 -->
                <section id="wardrobe-page" class="page active">
                    <div class="section-header">
                        <h2>我的衣柜</h2>
                        <div class="category-filter">
                            <button class="category-btn active" data-category="all">全部</button>
                            <button class="category-btn" data-category="top">上衣</button>
                            <button class="category-btn" data-category="pants">裤子</button>
                            <button class="category-btn" data-category="shoes">鞋子</button>
                            <button class="category-btn" data-category="accessory">配饰</button>
                        </div>
                    </div>
                    
                    <div class="clothes-grid" id="clothes-grid">
                        <!-- 衣服卡片将通过JS动态生成 -->
                    </div>
                </section>

                <!-- 穿搭组合页面 -->
                <section id="outfit-page" class="page">
                    <div class="section-header">
                        <h2>创建穿搭</h2>
                    </div>
                    
                    <div class="outfit-builder">
                        <div class="outfit-preview">
                            <h3>穿搭预览</h3>
                            <div class="outfit-display">
                                <div class="outfit-slot" data-slot="top">
                                    <span class="slot-placeholder">+ 选择上衣</span>
                                </div>
                                <div class="outfit-slot" data-slot="pants">
                                    <span class="slot-placeholder">+ 选择裤子</span>
                                </div>
                                <div class="outfit-slot" data-slot="shoes">
                                    <span class="slot-placeholder">+ 选择鞋子</span>
                                </div>
                                <div class="outfit-slot" data-slot="accessory">
                                    <span class="slot-placeholder">+ 选择配饰</span>
                                </div>
                            </div>
                            <button id="save-outfit-btn" class="btn-primary mt-2">保存穿搭</button>
                        </div>
                        
                        <div class="clothes-selector">
                            <h3>选择衣服</h3>
                            <div class="selector-category">
                                <button class="category-btn active" data-selector-category="top">上衣</button>
                                <button class="category-btn" data-selector-category="pants">裤子</button>
                                <button class="category-btn" data-selector-category="shoes">鞋子</button>
                                <button class="category-btn" data-selector-category="accessory">配饰</button>
                            </div>
                            <div class="selector-grid" id="selector-grid">
                                <!-- 可选择的衣服将通过JS动态生成 -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 穿搭库页面 -->
                <section id="outfits-page" class="page">
                    <div class="section-header">
                        <h2>我的穿搭</h2>
                        <button id="random-outfit-btn" class="btn-secondary" title="根据当前季节智能推荐">🎲 智能推荐</button>
                    </div>
                    
                    <div class="outfits-grid" id="outfits-grid">
                        <!-- 穿搭卡片将通过JS动态生成 -->
                    </div>
                </section>
            </div>
        </main>

        <!-- 底部导航 -->
        <footer class="bottom-nav">
            <button class="nav-item active" data-page="wardrobe-page">
                <span class="nav-icon">👔</span>
                <span class="nav-label">衣柜</span>
            </button>
            <button class="nav-item" data-page="outfit-page">
                <span class="nav-icon">✨</span>
                <span class="nav-label">创建</span>
            </button>
            <button class="nav-item" data-page="outfits-page">
                <span class="nav-icon">📋</span>
                <span class="nav-label">穿搭库</span>
            </button>
        </footer>
    </div>

    <!-- 摄像头模态框 -->
    <div id="camera-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>拍摄衣服</h3>
                <button class="close-btn" id="close-camera">&times;</button>
            </div>
            <div class="modal-body">
                <div class="camera-container">
                    <video id="camera-video" autoplay playsinline></video>
                    <canvas id="camera-canvas" style="display: none;"></canvas>
                    <div class="camera-controls">
                        <button id="capture-btn" class="btn-primary btn-large">📷 拍照</button>
                        <button id="retake-btn" class="btn-secondary" style="display: none;">🔄 重拍</button>
                    </div>
                </div>
                <div class="camera-preview" id="camera-preview" style="display: none;">
                    <h4>预览</h4>
                    <img id="preview-image" src="" alt="预览">
                </div>
                <div class="cloth-form" id="cloth-form" style="display: none;">
                    <h4>衣服信息</h4>
                    <div class="form-group">
                        <label for="cloth-name">名称</label>
                        <input type="text" id="cloth-name" placeholder="给衣服起个名字">
                    </div>
                    <div class="form-group">
                        <label for="cloth-category">分类</label>
                        <select id="cloth-category">
                            <option value="top">上衣</option>
                            <option value="pants">裤子</option>
                            <option value="shoes">鞋子</option>
                            <option value="accessory">配饰</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cloth-color">颜色</label>
                        <input type="text" id="cloth-color" placeholder="如：红色、蓝色">
                    </div>
                    <div class="form-group">
                        <label for="cloth-season">季节</label>
                        <select id="cloth-season">
                            <option value="spring">春季</option>
                            <option value="summer">夏季</option>
                            <option value="autumn">秋季</option>
                            <option value="winter">冬季</option>
                            <option value="all">四季</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button id="save-cloth-btn" class="btn-primary" title="保存所有信息">💾 完整保存</button>
                        <button id="quick-save-btn" class="btn-secondary" title="只需名称和分类，快速保存">⚡ 快速保存</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 图片查看器模态框 -->
    <div id="image-viewer-modal" class="modal">
        <div class="image-viewer-content">
            <button class="close-btn" id="close-viewer">&times;</button>
            <img id="viewer-image" src="" alt="查看图片">
            <div class="viewer-actions">
                <button id="delete-cloth-btn" class="btn-danger">🗑️ 删除</button>
            </div>
        </div>
    </div>

    <!-- 隐藏的文件上传输入 -->
    <input type="file" id="file-input" accept="image/*" style="display: none;">

    <!-- JavaScript 文件 -->
    <script src="js/storage.js"></script>
    <script src="js/ai-helper.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/closet.js"></script>
    <script src="js/outfit.js"></script>
    <script src="js/app.js"></script>
</body>
</html>